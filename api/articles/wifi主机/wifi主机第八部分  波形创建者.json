{"title":"WIFI主机-波形创建","uid":"bc733f0dd5782bf3825c926b0df036f7","slug":"wifi主机/wifi主机第八部分  波形创建者","date":"2020-08-15T10:49:36.000Z","updated":"2022-12-14T13:00:57.699Z","comments":true,"path":"api/articles/wifi主机/wifi主机第八部分  波形创建者.json","keywords":null,"cover":"https://cover.png","content":"<h1 id=\"WIFI主机\"><a href=\"#WIFI主机\" class=\"headerlink\" title=\"WIFI主机\"></a><font color=#996633 >WIFI主机</font></h1><h2 id=\"报警电路原理分析\"><a href=\"#报警电路原理分析\" class=\"headerlink\" title=\"报警电路原理分析\"></a><font color=#9400D3 >报警电路原理分析</font></h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><img src=\"https://zzypicgo.oss-cn-shanghai.aliyuncs.com/pic-go-master/img/image-20220623153807734.png\" alt=\"image-20220623153807734\"></p>\n<p>PA0引脚为普通IO口功能，输出低电平芯片工作，输出高电平，芯片不工作。(输出低电平三极管截止，那么CTRL就会被拉高)<br>PB4作为复用功能，用于PWM输出从而驱动喇叭发出声音。</p>\n<p>PB4对应定时器3的CH1(通道1)。</p>\n<p><img src=\"https://zzypicgo.oss-cn-shanghai.aliyuncs.com/pic-go-master/img/image-20220624001020379.png\" alt=\"image-20220624001020379\"></p>\n<p>可以看出TIM3_CH1是重定义功能</p></blockquote>\n<h2 id=\"什么是PWM？单片机怎么输出PWM？\"><a href=\"#什么是PWM？单片机怎么输出PWM？\" class=\"headerlink\" title=\"什么是PWM？单片机怎么输出PWM？\"></a><font color=#9400D3 >什么是PWM？单片机怎么输出PWM？</font></h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><strong>PWM就是输出脉宽（即占空比）可调的方波信号。</strong></p>\n<p><img src=\"https://zzypicgo.oss-cn-shanghai.aliyuncs.com/pic-go-master/img/image-20220624001336086.png\" alt=\"image-20220624001336086\"></p>\n<p>有些单片机内部的定时器有PWM输出功能，只需简单配置就能让相应的IO口输出不同频率的PWM。</p>\n<p>想输出一个PWM，必须知道几个关键参数：</p>\n<ol>\n<li>周期ARR</li>\n<li>占空比CCR</li>\n<li>计数器CNT</li>\n</ol>\n<p>当CNT的值小于CCR的时候，引脚输出高电平。<br>当CNT的值大于CCR的时候，引脚输出低电平。<br>当CNT的值等于ARR的时候，CNT重新初始化为0</p>\n<p><img src=\"https://zzypicgo.oss-cn-shanghai.aliyuncs.com/pic-go-master/img/image-20220623173000405.png\"></p></blockquote>\n<h2 id=\"喇叭工作原理\"><a href=\"#喇叭工作原理\" class=\"headerlink\" title=\"喇叭工作原理\"></a><font color=#9400D3 >喇叭工作原理</font></h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>喇叭这个东西算是一个行业，所以对于开发者使用来说，正确的做法是只需要知道无源的喇叭一般是通过PWM来控制它发出声音就可以了，频率一般在2-4KHZ，不同的频率发出不同的音调。</p>\n<p>而报警声就是在不同的时间控制不同的频率，实现音调快速不断地切换来发出不同的声音组合，而什么样的音调组合能够发出制定的音乐又是一个新的行业。</p></blockquote>\n<h2 id=\"STM32用定时器3实现频率可调PWM输出\"><a href=\"#STM32用定时器3实现频率可调PWM输出\" class=\"headerlink\" title=\"STM32用定时器3实现频率可调PWM输出\"></a><font color=#9400D3 >STM32用定时器3实现频率可调PWM输出</font></h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><strong>TIMx-&gt;ARR</strong></p>\n<p>定时周期，也就是我们PWM的频率或者周期。</p>\n<p><strong>TIMx-&gt;PSC</strong></p>\n<p>预分频器，时钟源经该预分频器才是定时器计数时钟 CK_CNT，它设定 PSC 寄存器的值。<br>计算公式为：计数器时钟频率 (fCK_CNT) 等于 fCK_PSC &#x2F; (PSC[15:0] + 1)，可实现 1 至 65536 分频。<br>如果我们系统时钟是72M，那把PSC设置成71，最终计数器时钟就是1M，也就是1us。</p>\n<p><strong>TIMx-&gt;CCR1</strong></p>\n<p>脉冲宽度，用来调节PWM占空比用的，计数器CNT会与这个寄存器的值进行对比，然后控制引脚输出高电平或者低电平来实现PWM功能</p></blockquote>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a><font color=#9400D3 >代码</font></h2><h3 id=\"Beep配置\"><a href=\"#Beep配置\" class=\"headerlink\" title=\"Beep配置\"></a><font color=#FF0033 >Beep配置</font></h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><img src=\"https://zzypicgo.oss-cn-shanghai.aliyuncs.com/pic-go-master/img/image-20220624191759759.png\" alt=\"image-20220624191759759\"></p></blockquote>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token comment\">//BEEP定时器和普通口配置</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">hal_BEEP_TIM_Config</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\tGPIO_InitTypeDef GPIO_InitStructure<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//输出比较通道 GPIO 初始化</span>\n\t<span class=\"token comment\">//先开时钟</span>\n\t<span class=\"token function\">RCC_APB2PeriphClockCmd</span><span class=\"token punctuation\">(</span>BEEP_TIM_CH1_GPIO_CLK <span class=\"token operator\">|</span> RCC_APB2Periph_AFIO<span class=\"token punctuation\">,</span> ENABLE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//调试复位口引脚重映射配置  把这个功能关掉</span>\n\t<span class=\"token function\">GPIO_PinRemapConfig</span><span class=\"token punctuation\">(</span>GPIO_Remap_SWJ_JTAGDisable<span class=\"token punctuation\">,</span> ENABLE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\tGPIO_InitStructure<span class=\"token punctuation\">.</span>GPIO_Pin <span class=\"token operator\">=</span>  BEEP_TIM_CH1_PIN<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//复用推挽  CH1的PWM脉冲波形</span>\n    GPIO_InitStructure<span class=\"token punctuation\">.</span>GPIO_Mode <span class=\"token operator\">=</span> GPIO_Mode_AF_PP<span class=\"token punctuation\">;</span>\n    GPIO_InitStructure<span class=\"token punctuation\">.</span>GPIO_Speed <span class=\"token operator\">=</span> GPIO_Speed_50MHz<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">GPIO_Init</span><span class=\"token punctuation\">(</span>BEEP_TIM_CH1_PORT<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>GPIO_InitStructure<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//beep控制口初始化</span>\n\t<span class=\"token comment\">//先开时钟</span>\n\t<span class=\"token function\">BEEP_EN_APBxClock_FUN</span><span class=\"token punctuation\">(</span>BEEP_EN_GPIO_CLK<span class=\"token punctuation\">,</span> ENABLE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\tGPIO_InitStructure<span class=\"token punctuation\">.</span>GPIO_Pin <span class=\"token operator\">=</span>  BEEP_EN_PIN<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//开漏</span>\n    GPIO_InitStructure<span class=\"token punctuation\">.</span>GPIO_Mode <span class=\"token operator\">=</span> GPIO_Mode_Out_PP<span class=\"token punctuation\">;</span>\n    GPIO_InitStructure<span class=\"token punctuation\">.</span>GPIO_Speed <span class=\"token operator\">=</span> GPIO_Speed_50MHz<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">GPIO_Init</span><span class=\"token punctuation\">(</span>BEEP_EN_PORT<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>GPIO_InitStructure<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">/*--------------------时基结构体初始化-------------------------*/</span>\n    <span class=\"token comment\">// 开启定时器时钟,我们这里内部时钟CK_INT=72M</span>\n    <span class=\"token function\">BEEP_TIM_APBxClock_FUN</span><span class=\"token punctuation\">(</span>BEEP_TIM_CLK<span class=\"token punctuation\">,</span>ENABLE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//Timer3部分重映射  TIM3_CH1->PB4 把这个开下来</span>\n\t<span class=\"token function\">GPIO_PinRemapConfig</span><span class=\"token punctuation\">(</span>GPIO_PartialRemap_TIM3<span class=\"token punctuation\">,</span> ENABLE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n\t<span class=\"token comment\">//决定时钟频率</span>\n\tTIM_TimeBaseInitTypeDef  TIM_TimeBaseStructure<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">// 自动重装载寄存器的值，累计TIM_Period+1个频率后产生一个更新或者中断</span>\n\t<span class=\"token comment\">//配置自动重装载寄存器arr，决定的是信号的周期,计多少个数</span>\n\tTIM_TimeBaseStructure<span class=\"token punctuation\">.</span>TIM_Period<span class=\"token operator\">=</span>BEEP_TIM_PERIOD<span class=\"token punctuation\">;</span>\t\n\t<span class=\"token comment\">// 驱动CNT计数器的时钟 = Fck_int/(psc+1)</span>\n\t<span class=\"token comment\">//分频器决定的是计数器记一次的时间</span>\n\tTIM_TimeBaseStructure<span class=\"token punctuation\">.</span>TIM_Prescaler<span class=\"token operator\">=</span> BEEP_TIM_PSC<span class=\"token punctuation\">;</span>\t\n\t<span class=\"token comment\">// 时钟分频因子 ，配置死区时间时需要用到，我们这边不是控制电机，默认0</span>\n\tTIM_TimeBaseStructure<span class=\"token punctuation\">.</span>TIM_ClockDivision<span class=\"token operator\">=</span>TIM_CKD_DIV1<span class=\"token punctuation\">;</span>\t\t\n\t<span class=\"token comment\">// 计数器计数模式，设置为向上计数</span>\n\tTIM_TimeBaseStructure<span class=\"token punctuation\">.</span>TIM_CounterMode<span class=\"token operator\">=</span>TIM_CounterMode_Up<span class=\"token punctuation\">;</span>\t\t\n\t<span class=\"token comment\">// 重复计数器的值，没用到不用管  高级定时器才有，我们这里实际上没用到</span>\n\tTIM_TimeBaseStructure<span class=\"token punctuation\">.</span>TIM_RepetitionCounter<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\t\n\t<span class=\"token comment\">// 初始化定时器</span>\n\t<span class=\"token function\">TIM_TimeBaseInit</span><span class=\"token punctuation\">(</span>BEEP_TIM<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>TIM_TimeBaseStructure<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">/*--------------------输出比较结构体初始化-------------------*/</span>\t\t\n    <span class=\"token comment\">//决定占空比</span>\n\tTIM_OCInitTypeDef  TIM_OCInitStructure<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">// 配置为PWM模式1 选择定时器模式:TIM脉冲宽度调制模式2</span>\n\tTIM_OCInitStructure<span class=\"token punctuation\">.</span>TIM_OCMode <span class=\"token operator\">=</span> TIM_OCMode_PWM1<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">// 输出使能</span>\n\tTIM_OCInitStructure<span class=\"token punctuation\">.</span>TIM_OutputState <span class=\"token operator\">=</span> TIM_OutputState_Enable<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">// 互补输出使能  只有高级定时器才有，我们这里关闭即可</span>\n\tTIM_OCInitStructure<span class=\"token punctuation\">.</span>TIM_OutputNState <span class=\"token operator\">=</span> TIM_OutputNState_Disable<span class=\"token punctuation\">;</span> \n\t<span class=\"token comment\">// 设置占空比大小</span>\n\tTIM_OCInitStructure<span class=\"token punctuation\">.</span>TIM_Pulse <span class=\"token operator\">=</span> BEEP_TIM_PULSE<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">// 输出通道电平极性配置，通道是否有效是通过极性配置的</span>\n\tTIM_OCInitStructure<span class=\"token punctuation\">.</span>TIM_OCPolarity <span class=\"token operator\">=</span> TIM_OCPolarity_High<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">// 互补输出通道电平极性配置  没有互补通道这里无所谓</span>\n\tTIM_OCInitStructure<span class=\"token punctuation\">.</span>TIM_OCNPolarity <span class=\"token operator\">=</span> TIM_OCNPolarity_High<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">// 输出通道空闲电平状态配置</span>\n\tTIM_OCInitStructure<span class=\"token punctuation\">.</span>TIM_OCIdleState <span class=\"token operator\">=</span> TIM_OCIdleState_Set<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">// 互补输出通道空闲电平状态配置  这个只有高级定时器有  我们这无所谓</span>\n\tTIM_OCInitStructure<span class=\"token punctuation\">.</span>TIM_OCNIdleState <span class=\"token operator\">=</span> TIM_OCNIdleState_Reset<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//根据T指定的参数初始化外设TIM3 OC1</span>\n\t<span class=\"token function\">TIM_OC1Init</span><span class=\"token punctuation\">(</span>BEEP_TIM<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>TIM_OCInitStructure<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//使能TIM3在CCR1上的预装载寄存器</span>\n\t<span class=\"token function\">TIM_OC1PreloadConfig</span><span class=\"token punctuation\">(</span>BEEP_TIM<span class=\"token punctuation\">,</span> TIM_OCPreload_Enable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t\n\t<span class=\"token comment\">//使能TIM3</span>\n\t<span class=\"token function\">TIM_Cmd</span><span class=\"token punctuation\">(</span>BEEP_TIM<span class=\"token punctuation\">,</span> ENABLE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"hal-BeepPwmCtrl-喇叭pwm控制函数\"><a href=\"#hal-BeepPwmCtrl-喇叭pwm控制函数\" class=\"headerlink\" title=\"hal_BeepPwmCtrl  喇叭pwm控制函数\"></a><font color=#FF0033 >hal_BeepPwmCtrl  喇叭pwm控制函数</font></h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><img src=\"https://zzypicgo.oss-cn-shanghai.aliyuncs.com/pic-go-master/img/image-20220624193148867.png\" alt=\"image-20220624193148867\"></p></blockquote>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token comment\">//喇叭PWM控制</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">hal_BeepPwmCtrl</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span> cmd<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span> \n\t<span class=\"token comment\">//1把控制脚拉低就会工作，0把控制脚拉高就会不工作</span>\n\tcmd <span class=\"token operator\">?</span> <span class=\"token function\">GPIO_ResetBits</span><span class=\"token punctuation\">(</span>BEEP_EN_PORT<span class=\"token punctuation\">,</span>BEEP_EN_PIN<span class=\"token punctuation\">)</span>\n\t    <span class=\"token operator\">:</span> <span class=\"token function\">GPIO_SetBits</span><span class=\"token punctuation\">(</span>BEEP_EN_PORT<span class=\"token punctuation\">,</span>BEEP_EN_PIN<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"hal-BeepPwmHandle-喇叭pwm中断函数\"><a href=\"#hal-BeepPwmHandle-喇叭pwm中断函数\" class=\"headerlink\" title=\"hal_BeepPwmHandle  喇叭pwm中断函数\"></a><font color=#FF0033 >hal_BeepPwmHandle  喇叭pwm中断函数</font></h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><img src=\"https://zzypicgo.oss-cn-shanghai.aliyuncs.com/pic-go-master/img/image-20220624202057547.png\" alt=\"image-20220624202057547\"></p></blockquote>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token comment\">//喇叭中断函数</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">hal_BeepPwmHandle</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">static</span> <span class=\"token class-name\">uint8_t</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//hal_SetBeepFreq(NoteFreqAry[i]);</span>\n\t<span class=\"token comment\">//改变ARR的值来改变周期</span>\n\t<span class=\"token function\">TIM_SetAutoreload</span><span class=\"token punctuation\">(</span>TIM3<span class=\"token punctuation\">,</span>NoteFreqAry<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//改变CRR的值来改变占空比(我们这里一直都用周期的一半)</span>\n\t<span class=\"token function\">TIM_SetCompare1</span><span class=\"token punctuation\">(</span>TIM3<span class=\"token punctuation\">,</span>NoteFreqAry<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//计数器清零</span>\n\t<span class=\"token function\">TIM_SetCounter</span><span class=\"token punctuation\">(</span>TIM3<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//6ms换一个频率</span>\n\ti<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">></span>BP_num<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\ti<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token comment\">//不要忘了重启定时器</span>\n\t<span class=\"token function\">hal_ResetTimer</span><span class=\"token punctuation\">(</span>T_BEEP<span class=\"token punctuation\">,</span>T_STA_START<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>   <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"hal-BeepInit-喇叭初始化函数\"><a href=\"#hal-BeepInit-喇叭初始化函数\" class=\"headerlink\" title=\"hal_BeepInit  喇叭初始化函数\"></a><font color=#FF0033 >hal_BeepInit  喇叭初始化函数</font></h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><img src=\"https://zzypicgo.oss-cn-shanghai.aliyuncs.com/pic-go-master/img/image-20220624202327933.png\" alt=\"image-20220624202327933\"></p></blockquote>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token comment\">//喇叭初始化</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">hal_BeepInit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token function\">hal_BEEP_TIM_Config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//创建一个喇叭定时器 50us*120=6ms</span>\n\t<span class=\"token function\">hal_CreatTimer</span><span class=\"token punctuation\">(</span>T_BEEP<span class=\"token punctuation\">,</span>hal_BeepPwmHandle<span class=\"token punctuation\">,</span><span class=\"token number\">120</span><span class=\"token punctuation\">,</span>T_STA_START<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//让喇叭芯片可以工作</span>\n\t<span class=\"token function\">hal_BeepPwmCtrl</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\t<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<h2 id=\"二级标题\"><a href=\"#二级标题\" class=\"headerlink\" title=\"二级标题\"></a><font color=#9400D3 >二级标题</font></h2><h3 id=\"三级标题\"><a href=\"#三级标题\" class=\"headerlink\" title=\"三级标题\"></a><font color=#FF0033 >三级标题</font></h3><h4 id=\"四级标题\"><a href=\"#四级标题\" class=\"headerlink\" title=\"四级标题\"></a><font color=#0000CC >四级标题</font></h4><h5 id=\"五级标题\"><a href=\"#五级标题\" class=\"headerlink\" title=\"五级标题\"></a><font color=#FF00FF >五级标题</font></h5><h6 id=\"六级标题\"><a href=\"#六级标题\" class=\"headerlink\" title=\"六级标题\"></a><font color=#00CC00 >六级标题</font></h6>","feature":true,"text":"WIFI主机报警电路原理分析 PA0引脚为普通IO口功能，输出低电平芯片工作，输出高电平，芯片不工作。(输出低电平三极管截止，那么CTRL就会被拉高)PB4作为复用功能，用于PWM输出从而驱动喇叭发出声音。 PB4对应定时器3的CH1(通道1)。 可以看出TIM3_CH1是重定义...","link":"","photos":[],"count_time":{"symbolsCount":"4.6k","symbolsTime":"4 mins."},"categories":[{"name":"单片机","slug":"单片机","count":12,"path":"api/categories/单片机.json"}],"tags":[{"name":"STM32","slug":"STM32","count":12,"path":"api/tags/STM32.json"},{"name":"主机","slug":"主机","count":12,"path":"api/tags/主机.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#WIFI%E4%B8%BB%E6%9C%BA\"><span class=\"toc-text\">WIFI主机</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%8A%A5%E8%AD%A6%E7%94%B5%E8%B7%AF%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90\"><span class=\"toc-text\">报警电路原理分析</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%80%E4%B9%88%E6%98%AFPWM%EF%BC%9F%E5%8D%95%E7%89%87%E6%9C%BA%E6%80%8E%E4%B9%88%E8%BE%93%E5%87%BAPWM%EF%BC%9F\"><span class=\"toc-text\">什么是PWM？单片机怎么输出PWM？</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%96%87%E5%8F%AD%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86\"><span class=\"toc-text\">喇叭工作原理</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#STM32%E7%94%A8%E5%AE%9A%E6%97%B6%E5%99%A83%E5%AE%9E%E7%8E%B0%E9%A2%91%E7%8E%87%E5%8F%AF%E8%B0%83PWM%E8%BE%93%E5%87%BA\"><span class=\"toc-text\">STM32用定时器3实现频率可调PWM输出</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%A3%E7%A0%81\"><span class=\"toc-text\">代码</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Beep%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">Beep配置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#hal-BeepPwmCtrl-%E5%96%87%E5%8F%ADpwm%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">hal_BeepPwmCtrl  喇叭pwm控制函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#hal-BeepPwmHandle-%E5%96%87%E5%8F%ADpwm%E4%B8%AD%E6%96%AD%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">hal_BeepPwmHandle  喇叭pwm中断函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#hal-BeepInit-%E5%96%87%E5%8F%AD%E5%88%9D%E5%A7%8B%E5%8C%96%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">hal_BeepInit  喇叭初始化函数</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E7%BA%A7%E6%A0%87%E9%A2%98\"><span class=\"toc-text\">二级标题</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%89%E7%BA%A7%E6%A0%87%E9%A2%98\"><span class=\"toc-text\">三级标题</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E7%BA%A7%E6%A0%87%E9%A2%98\"><span class=\"toc-text\">四级标题</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E4%BA%94%E7%BA%A7%E6%A0%87%E9%A2%98\"><span class=\"toc-text\">五级标题</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#%E5%85%AD%E7%BA%A7%E6%A0%87%E9%A2%98\"><span class=\"toc-text\">六级标题</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li></ol>","author":{"name":"虫子","slug":"blog-author","avatar":"https://zzypicgo.oss-cn-shanghai.aliyuncs.com/pic-go-master/img/hello2.png","link":"/","description":"一旦错过，愿你安好","socials":{"github":"https://github.com/yuanliyuan-zhongyuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/wei-yuan-88-76-79","csdn":"https://blog.csdn.net/qq_42832862","juejin":"https://juejin.cn/user/2507322433224183","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/387304134"}}}},"mapped":true,"prev_post":{"title":"WIFI主机-打通域界","uid":"cc1ca5f7b232d316a6eb483fac865b2d","slug":"wifi主机/wifi主机第五部分  打通界域","date":"2020-08-15T10:49:36.000Z","updated":"2022-12-14T13:07:52.665Z","comments":true,"path":"api/articles/wifi主机/wifi主机第五部分  打通界域.json","keywords":null,"cover":"https://cover.png","text":"WIFI主机 现在才是产品阶段 433M无线通讯的一些常识 我们这个主机是防盗报警主机，所以必须要配合周边传感器形成一道防御网络，比如说门磁传感器装在大门，开门后，门磁探测器触发然后通过433MHz频段的无线发送一组数据给主机，然后主机接收到就报警。 为什么要用无线 因为免去了布...","link":"","photos":[],"count_time":{"symbolsCount":"9.3k","symbolsTime":"8 mins."},"categories":[{"name":"单片机","slug":"单片机","count":12,"path":"api/categories/单片机.json"}],"tags":[{"name":"STM32","slug":"STM32","count":12,"path":"api/tags/STM32.json"},{"name":"主机","slug":"主机","count":12,"path":"api/tags/主机.json"}],"author":{"name":"虫子","slug":"blog-author","avatar":"https://zzypicgo.oss-cn-shanghai.aliyuncs.com/pic-go-master/img/hello2.png","link":"/","description":"一旦错过，愿你安好","socials":{"github":"https://github.com/yuanliyuan-zhongyuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/wei-yuan-88-76-79","csdn":"https://blog.csdn.net/qq_42832862","juejin":"https://juejin.cn/user/2507322433224183","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/387304134"}}}},"feature":true},"next_post":{"title":"WIFI主机-高级","uid":"f9f001f09edb1b9283e01c9882734988","slug":"wifi主机/wifi主机第六部分  向上突破","date":"2020-08-15T10:49:36.000Z","updated":"2022-12-14T13:02:15.422Z","comments":true,"path":"api/articles/wifi主机/wifi主机第六部分  向上突破.json","keywords":null,"cover":"https://cover.png","text":"WIFI主机 我们c8t6有三个串口，但是用就用到了1,2 通信的基本概念 在计算机的设备与设备之间或集成电路之间常常需要进行数据传输 并行与串行 全双工、半双工和单工 同步与异步 有时钟线的基本都是同步 没时钟线的基本都是异步 在同步通讯中，数据信号所传输的内容绝大部分就是有效...","link":"","photos":[],"count_time":{"symbolsCount":"12k","symbolsTime":"11 mins."},"categories":[{"name":"单片机","slug":"单片机","count":12,"path":"api/categories/单片机.json"}],"tags":[{"name":"STM32","slug":"STM32","count":12,"path":"api/tags/STM32.json"},{"name":"主机","slug":"主机","count":12,"path":"api/tags/主机.json"}],"author":{"name":"虫子","slug":"blog-author","avatar":"https://zzypicgo.oss-cn-shanghai.aliyuncs.com/pic-go-master/img/hello2.png","link":"/","description":"一旦错过，愿你安好","socials":{"github":"https://github.com/yuanliyuan-zhongyuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/wei-yuan-88-76-79","csdn":"https://blog.csdn.net/qq_42832862","juejin":"https://juejin.cn/user/2507322433224183","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/387304134"}}}},"feature":true}}